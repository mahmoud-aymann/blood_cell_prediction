<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Prediction Result - Blood Cell Diagnostics</title>
    <meta name="description" content="AI-powered blood cell classification result">
    <link rel="icon" href="{{ url_for('static', filename='logo.svg') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <div class="brand">
          <img class="logo-img" src="{{ url_for('static', filename='logo.svg') }}" alt="Blood Cell Diagnostics Logo" />
          <div class="brand-text">
            <h1>Blood Cell Diagnostics</h1>
            <p>AI-powered hematology image classification</p>
          </div>
        </div>
        <nav class="top-nav">
          <a href="{{ url_for('index') }}" class="nav-link">Home</a>
          <a href="{{ url_for('about') }}" class="nav-link">About</a>
          <a href="#privacy" class="nav-link">Privacy</a>
          <a href="mailto:mahmoudaymann153@gmail.com" class="contact-link">Contact</a>
        </nav>
      </div>
    </header>

    <main class="container">
      <!-- Result Header -->
      <section class="result-header">
        <div class="result-title">
          <h2>Analysis Complete</h2>
          <p class="muted">Blood cell classification result</p>
        </div>
      </section>

      <div class="grid">
        <div class="card">
          <div class="image-frame">
            <img src="data:image/png;base64,{{ preview_b64 }}" alt="Preview image" class="result-preview" id="zoomImg" />
          </div>
          <div class="zoom-controls">
            <button class="button" id="zoomIn" type="button">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="M21 21l-4.35-4.35"></path>
                <line x1="11" y1="8" x2="11" y2="14"></line>
                <line x1="8" y1="11" x2="14" y2="11"></line>
              </svg>
              Zoom in
            </button>
            <button class="button" id="zoomOut" type="button">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="M21 21l-4.35-4.35"></path>
                <line x1="8" y1="11" x2="14" y2="11"></line>
              </svg>
              Zoom out
            </button>
            <button class="button" id="zoomReset" type="button">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
                <path d="M21 3v5h-5"></path>
                <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path>
                <path d="M3 21v-5h5"></path>
              </svg>
              Reset
            </button>
          </div>
        </div>
        <div class="card">
          <h2>{{ predicted_label }}</h2>
          <p>Confidence: {{ '%.2f'|format(predicted_confidence * 100) }}%</p>

          <h3>Prediction Details</h3>
          <ul class="pred-list bars">
            {% for label, prob in predictions %}
              <li>
                <div class="bar">
                  <div class="bar-fill" style="width: {{ (prob * 100)|round(2) }}%"></div>
                  <div class="bar-labels">
                    <span>{{ label }}</span>
                    <span>{{ '%.2f'|format(prob * 100) }}%</span>
                  </div>
                </div>
              </li>
            {% endfor %}
          </ul>
          <div class="share-actions">
            <button class="button" id="copyResult" type="button">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
              </svg>
              Copy result
            </button>
            <button class="button" id="printResult" type="button">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="6,9 6,2 18,2 18,9"></polyline>
                <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path>
                <rect x="6" y="14" width="12" height="8"></rect>
              </svg>
              Print / PDF
            </button>
          </div>
        </div>
      </div>

      <div class="actions">
        <a class="button" href="{{ url_for('index') }}">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
            <path d="M21 3v5h-5"></path>
            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path>
            <path d="M3 21v-5h5"></path>
          </svg>
          Try another image
        </a>
      </div>
    </div>
    <script src="{{ url_for('static', filename='result.js') }}"></script>
  </body>
  </html>


